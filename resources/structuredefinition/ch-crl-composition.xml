<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
    <id value="ch-crl-composition"/>
    <url value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-composition"/>
    <version value="0.1.0"/>
    <name value="CHCRLComposition"/>
    <title value="CH CRL Composition Profile"/>
    <status value="draft"/>
    <date value="2019-09-02"/>
    <publisher value="Bundesamt fÃ¼r Gesundheit BAG"/>
    <description value="Profile on Composition for Reporting to the Cancer Registry"/>
    <fhirVersion value="4.0.0" />
    <kind value="resource"/>
    <abstract value="false"/>
    <type value="Composition"/>
    <baseDefinition value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-composition"/>
    <derivation value="constraint"/>
    <differential>
        <element id="Composition">
            <path value="Composition"/>
        </element>

        <element id="Composition.type">
            <path value="Composition.type"/>
            <patternCodeableConcept>
                <coding>
                    <system value="http://loinc.org" />
                    <code value="72134-0"/>
                    <display value="Cancer event report"/>
                </coding>
            </patternCodeableConcept>
        </element>

        <element id="Composition.subject">
            <path value="Composition.subject"/>
            <short value="Patient"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-patient"/>
            </type>
        </element>
        <element id="Composition.subject.reference">
            <path value="Composition.subject.reference"/>
            <min value="1"/>
        </element>

        <element id="Composition.author">
            <path value="Composition.author"/>
            <short value="Practitioner if Resident Physician or Organization Department if Hospital"/>
            <min value="1"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-practitioner"/>
                <targetProfile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-organization-department"/>
            </type>
        </element>
        <element id="Composition.author.reference">
            <path value="Composition.author.reference"/>
            <min value="1"/>
        </element>

        <!-- Different sections of the composition -->
        <element id="Composition.section">
            <path value="Composition.section"/>
            <min value="1"/>
        </element>
        <element id="Composition.section.entry">
            <path value="Composition.section.entry"/>
            <slicing>
                <discriminator>
                    <type value="profile"/>
                    <path value="reference"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
        </element>

        <!-- Section document reference -->
        <element id="Composition.section.entry:documentReference">
            <path value="Composition.section.entry"/>
            <sliceName value="documentReference"/>
            <short value="Report as base64Binary"/>
        </element>
        <element id="Composition.section.entry:documentReference.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-documentreference"/>
            </type>
        </element>

        <!-- Section communication -->
        <element id="Composition.section.entry:communication">
            <path value="Composition.section.entry"/>
            <sliceName value="communication"/>
            <short value="Date of Patient Information"/>
        </element>
        <element id="Composition.section.entry:communication.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-communication"/>
            </type>
        </element>

        <!-- Section final cause of death -->
        <element id="Composition.section.entry:finalCauseOfDeath">
            <path value="Composition.section.entry"/>
            <sliceName value="finalCauseOfDeath"/>
            <short value="Final Cause of Death"/>
        </element>
        <element id="Composition.section.entry:finalCauseOfDeath.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-condition-finalcauseofdeath"/>
            </type>
        </element>

        <!-- Section primary disease -->
        <element id="Composition.section.entry:primaryDisease">
            <path value="Composition.section.entry"/>
            <sliceName value="primaryDisease"/>
            <short value="Primary Disease"/>
        </element>
        <element id="Composition.section.entry:primaryDisease.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-condition-disease"/>
            </type>
        </element>

        <!-- Section secondary disease -->
        <element id="Composition.section.entry:secondaryDisease">
            <path value="Composition.section.entry"/>
            <sliceName value="secondaryDisease"/>
            <short value="Secondary Disease"/>
        </element>
        <element id="Composition.section.entry:secondaryDisease.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-condition-disease"/>
            </type>
        </element>

        <!-- Section concomitant disease -->
        <element id="Composition.section.entry:concomitantDisease">
            <path value="Composition.section.entry"/>
            <sliceName value="concomitantDisease"/>
            <short value="Concomitant Disease"/>
        </element>
        <element id="Composition.section.entry:concomitantDisease.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-condition-disease"/>
            </type>
        </element>

        <!-- Section date of incidence -->
        <element id="Composition.section.entry:dateOfIncidence">
            <path value="Composition.section.entry"/>
            <sliceName value="dateOfIncidence"/>
            <short value="Date of Incidence"/>
        </element>
        <element id="Composition.section.entry:dateOfIncidence.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-dateofincidence"/>
            </type>
        </element>

        <!-- Section TNM clinical primary tumor category -->
        <element id="Composition.section.entry:TNMClinicalPrimaryTumorCategory">
            <path value="Composition.section.entry"/>
            <sliceName value="TNMClinicalPrimaryTumorCategory"/>
            <short value="TNM Clinical Primary Tumor Category"/>
        </element>
        <element id="Composition.section.entry:TNMClinicalPrimaryTumorCategory.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-ct"/>
            </type>
        </element>

        <!-- Section TNM clinical regional nodes category -->
        <element id="Composition.section.entry:TNMClinicalRegionalNodesCategory">
            <path value="Composition.section.entry"/>
            <sliceName value="TNMClinicalRegionalNodesCategory"/>
            <short value="TNM Clinical Regional Nodes Category"/>
        </element>
        <element id="Composition.section.entry:TNMClinicalRegionalNodesCategory.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-cn"/>
            </type>
        </element>

        <!-- Section TNM Clinical Distant Metastases Category -->
        <element id="Composition.section.entry:TNMClinicalDistantMetastasesCategory">
            <path value="Composition.section.entry"/>
            <sliceName value="TNMClinicalDistantMetastasesCategory"/>
            <short value="TNM Clinical Distant Metastases Category"/>
        </element>
        <element id="Composition.section.entry:TNMClinicalDistantMetastasesCategory.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-cm"/>
            </type>
        </element>

        <!-- Section TNM pathologic primary tumor category -->
        <element id="Composition.section.entry:TNMPathologicPrimaryTumorCategory">
            <path value="Composition.section.entry"/>
            <sliceName value="TNMPathologicPrimaryTumorCategory"/>
            <short value="TNM Pathologic Primary Tumor Category"/>
        </element>
        <element id="Composition.section.entry:TNMPathologicPrimaryTumorCategory.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-pt"/>
            </type>
        </element>

        <!-- Section TNM pathologic regional nodes category -->
        <element id="Composition.section.entry:TNMPathologicRegionalNodesCategory">
            <path value="Composition.section.entry"/>
            <sliceName value="TNMPathologicRegionalNodesCategory"/>
            <short value="TNM Pathologic Regional Nodes Category"/>
        </element>
        <element id="Composition.section.entry:TNMPathologicRegionalNodesCategory.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-pn"/>
            </type>
        </element>

        <!-- Section TNM Pathologic Distant Metastases Category -->
        <element id="Composition.section.entry:TNMPathologicDistantMetastasesCategory">
            <path value="Composition.section.entry"/>
            <sliceName value="TNMPathologicDistantMetastasesCategory"/>
            <short value="TNM Pathologic Distant Metastases Category"/>
        </element>
        <element id="Composition.section.entry:TNMPathologicDistantMetastasesCategory.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-pm"/>
            </type>
        </element>

        <!-- Section ICD-10 code -->
        <element id="Composition.section.entry:ICD-10">
            <path value="Composition.section.entry"/>
            <sliceName value="ICD-10"/>
            <short value="ICD-10 code"/>
        </element>
        <element id="Composition.section.entry:ICD-10.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-icd10"/>
            </type>
        </element>

        <!-- Section ICD-O-3 Morphology -->
        <element id="Composition.section.entry:ICD-O-3-Morphology">
            <path value="Composition.section.entry"/>
            <sliceName value="ICD-O-3-Morphology"/>
            <short value="ICD-O-3 Morphology code"/>
        </element>
        <element id="Composition.section.entry:ICD-O-3-Morphology.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-icdo3morphology"/>
            </type>
        </element>

        <!-- Section ICD-O-3 Topography -->
        <element id="Composition.section.entry:ICD-O-3-Topography">
            <path value="Composition.section.entry"/>
            <sliceName value="ICD-O-3-Topography"/>
            <short value="ICD-O-3 Topography code"/>
        </element>
        <element id="Composition.section.entry:ICD-O-3-Topography.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-icdo3topography"/>
            </type>
        </element>

        <!-- Section ICD-O-3 Behaviour -->
        <element id="Composition.section.entry:ICD-O-3-Behaviour">
            <path value="Composition.section.entry"/>
            <sliceName value="ICD-O-3-Behaviour"/>
            <short value="ICD-O-3 Behaviour code"/>
        </element>
        <element id="Composition.section.entry:ICD-O-3-Behaviour.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-icdo3behaviour"/>
            </type>
        </element>

        <!-- Section ICD-O-3 Laterality -->
        <element id="Composition.section.entry:ICD-O-3-Laterality">
            <path value="Composition.section.entry"/>
            <sliceName value="ICD-O-3-Laterality"/>
            <short value="ICD-O-3 Laterality code"/>
        </element>
        <element id="Composition.section.entry:ICD-O-3-Laterality.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-icdo3laterality"/>
            </type>
        </element>

        <!-- Section ICD-O-3 Histological Grade -->
        <element id="Composition.section.entry:ICD-O-3-HistologicalGrade">
            <path value="Composition.section.entry"/>
            <sliceName value="ICD-O-3-HistologicalGrade"/>
            <short value="ICD-O-3 Histological Grade code"/>
        </element>
        <element id="Composition.section.entry:ICD-O-3-HistologicalGrade.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-icdo3histologicalgrade"/>
            </type>
        </element>

        <!-- Section y-Prefix of cTNM -->
        <element id="Composition.section.entry:y-Prefix-cTNM">
            <path value="Composition.section.entry"/>
            <sliceName value="y-Prefix-cTNM"/>
            <short value="y-Prefix of cTNM"/>
        </element>
        <element id="Composition.section.entry:y-Prefix-cTNM.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-yprefixofctnm"/>
            </type>
        </element>

        <!-- Section a-Prefix of pTNM -->
        <element id="Composition.section.entry:a-Prefix-pTNM">
            <path value="Composition.section.entry"/>
            <sliceName value="a-Prefix-pTNM"/>
            <short value="a-Prefix of pTNM"/>
        </element>
        <element id="Composition.section.entry:a-Prefix-pTNM.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-aprefixofptnm"/>
            </type>
        </element>

        <!-- Section y-Prefix of pTNM -->
        <element id="Composition.section.entry:y-Prefix-pTNM">
            <path value="Composition.section.entry"/>
            <sliceName value="y-Prefix-pTNM"/>
            <short value="y-Prefix of pTNM"/>
        </element>
        <element id="Composition.section.entry:y-Prefix-pTNM.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-observation-yprefixofptnm"/>
            </type>
        </element>

        <!--
m-Suffix of pT
Number of involved regional lymph nodes
Number of examined regional lymph nodes
Lymphatic invasion
Venous invasion
Perineural invasion
TNM stage group
-->


        <!-- Section diagnostic method -->
        <element id="Composition.section.entry:diagnosticMethod">
            <path value="Composition.section.entry"/>
            <sliceName value="diagnosticMethod"/>
            <short value="Diagnostic Method used"/>
        </element>
        <element id="Composition.section.entry:diagnosticMethod.reference">
            <path value="Composition.section.entry.reference"/>
            <min value="1"/>
            <type>
                <code value="string"/>
                <profile value="http://fhir.ch/ig/ch-crl/StructureDefinition/ch-crl-procedure-diagnosticmethod"/>
            </type>
        </element>

    </differential>
</StructureDefinition>